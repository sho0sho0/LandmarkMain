{% extends "landmark/base.html" %}

{% block head %}
{% load static %}
<link rel="stylesheet" href="{% static 'landmark/css/diplomas.css' %}">
{% endblock %}
{% block content %}

<div class="container">
    <!-- Sidebar with scrollable diploma cards -->
    <div class="d-sidebar">
        {% for diploma in diplomas %}
        
        <div class="diploma-card" onmouseover="showDetails('{{ diploma.id }}')">
            <div class="d-date">
             <p>{{diploma.start_course.date}}</p>
             <form method="post">
                {% csrf_token %}
                <input type="hidden" name="diploma_id" value="{{ diploma.id }}">
    
                {% if user.is_authenticated %}
                    {% if diploma in user.userprofile.wishlist.all %}
                        <!-- If the diploma is in the wishlist, show the filled icon -->
                        <button type="submit" name="action" value="remove" class="saved" onclick="toggleSave(this)">
                            <svg id="save-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" width="30" height="30">
                                <path class="outline" d="M20.5 2.5h-17c-.827 0-1.5.673-1.5 1.5v18l10-6 10 6v-18c0-.827-.673-1.5-1.5-1.5zm-1.5 17.344l-8.5-5.1-8.5 5.1v-15.344h17v15.344z" fill="#D3D3D3"/>
                                <path class="filled" d="M3 2.5h18c.827 0 1.5.673 1.5 1.5v18l-10-6-10 6v-18c0-.827.673-1.5 1.5-1.5z" fill="darkblue" style="display: block;"/>
                            </svg>
                        </button>
                    {% else %}
                        <!-- If the diploma is not in the wishlist, show the outline icon -->
                        <button type="submit" name="action" value="add" class="saved" onclick="toggleSave(this)">
                            <svg id="save-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" width="30" height="30">
                                <path class="outline" d="M20.5 2.5h-17c-.827 0-1.5.673-1.5 1.5v18l10-6 10 6v-18c0-.827-.673-1.5-1.5-1.5zm-1.5 17.344l-8.5-5.1-8.5 5.1v-15.344h17v15.344z" fill="#D3D3D3"/>
                                <path class="filled" d="M3 2.5h18c.827 0 1.5.673 1.5 1.5v18l-10-6-10 6v-18c0-.827.673-1.5 1.5-1.5z" fill="#A9A9A9" style="display: none;"/>
                            </svg>
                        </button>
                    {% endif %}
                {% endif %}
            </form>
            </div>
            <div class="d-name-img">
                <p>{{ diploma.name}}</p>
                <img src="{{diploma.image.url}}" alt="diploma">
            </div>

            <div class="d-module-info">
                <div class="d-no-modules">
                   <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M19.13 7.78955C19.17 8.39955 19.12 9.08955 19 9.85955L18.27 14.5495C17.65 18.4595 15.84 19.7795 11.93 19.1695L7.23999 18.4295C5.88999 18.2195 4.84999 17.8595 4.08999 17.3195C2.63999 16.3095 2.21999 14.6495 2.61999 12.0895L3.35999 7.39955C3.97999 3.48955 5.78999 2.16955 9.69999 2.77955L14.39 3.51955C17.53 4.00955 19 5.28955 19.13 7.78955Z" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                       <path d="M20.9998 14.1096L19.4998 18.6196C18.2498 22.3796 16.2498 23.3796 12.4898 22.1296L7.97984 20.6296C5.70984 19.8796 4.44984 18.8396 4.08984 17.3196C4.84984 17.8596 5.88984 18.2196 7.23984 18.4296L11.9298 19.1696C15.8398 19.7796 17.6498 18.4596 18.2698 14.5496L18.9998 9.85955C19.1198 9.08955 19.1698 8.39955 19.1298 7.78955C21.5198 9.05955 22.0398 10.9796 20.9998 14.1096Z" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                       <path d="M8.74 9.61953C9.70098 9.61953 10.48 8.8405 10.48 7.87953C10.48 6.91855 9.70098 6.13953 8.74 6.13953C7.77902 6.13953 7 6.91855 7 7.87953C7 8.8405 7.77902 9.61953 8.74 9.61953Z" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                       </svg>
                       <p>{{ diploma.module_count}} Modules</p>
                </div>
                <div class="d-duration">
                      <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M22.5 12.6395C22.5 18.1595 18.02 22.6395 12.5 22.6395C6.98 22.6395 2.5 18.1595 2.5 12.6395C2.5 7.11946 6.98 2.63947 12.5 2.63947C18.02 2.63947 22.5 7.11946 22.5 12.6395Z" stroke="#333333" stroke-width="1.23837" stroke-linecap="round" stroke-linejoin="round"/>
                       <path d="M16.2099 15.8196L13.1099 13.9696C12.5699 13.6496 12.1299 12.8796 12.1299 12.2496V8.1496" stroke="#333333" stroke-width="1.23837" stroke-linecap="round" stroke-linejoin="round"/>
                       </svg>
                       {% load custom_filters %}
                       <p>{{ diploma.course_duration|duration_hours }}</p>
                </div>
                <div class="d-oonline">
                   <svg width="136" height="25" viewBox="0 0 136 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M12.4999 14.0695C14.223 14.0695 15.6199 12.6727 15.6199 10.9495C15.6199 9.2264 14.223 7.82953 12.4999 7.82953C10.7768 7.82953 9.37988 9.2264 9.37988 10.9495C9.37988 12.6727 10.7768 14.0695 12.4999 14.0695Z" stroke="#333333" stroke-width="1.23837"/>
                       <path d="M4.1202 9.12947C6.0902 0.469468 18.9202 0.479468 20.8802 9.13947C22.0302 14.2195 18.8702 18.5195 16.1002 21.1795C14.0902 23.1195 10.9102 23.1195 8.8902 21.1795C6.1302 18.5195 2.9702 14.2095 4.1202 9.12947Z" stroke="#333333" stroke-width="1.23837"/>
                       <path d="M38.002 17.2375C37.0967 17.2375 36.2707 17.0275 35.524 16.6075C34.7773 16.1782 34.1847 15.5855 33.746 14.8295C33.3167 14.0642 33.102 13.2055 33.102 12.2535C33.102 11.3015 33.3167 10.4475 33.746 9.69153C34.1847 8.92619 34.7773 8.33353 35.524 7.91353C36.2707 7.48419 37.0967 7.26953 38.002 7.26953C38.9167 7.26953 39.7473 7.48419 40.494 7.91353C41.2407 8.33353 41.8287 8.92153 42.258 9.67753C42.6873 10.4335 42.902 11.2922 42.902 12.2535C42.902 13.2149 42.6873 14.0735 42.258 14.8295C41.8287 15.5855 41.2407 16.1782 40.494 16.6075C39.7473 17.0275 38.9167 17.2375 38.002 17.2375ZM38.002 16.1315C38.6833 16.1315 39.2947 15.9729 39.836 15.6555C40.3867 15.3382 40.816 14.8855 41.124 14.2975C41.4413 13.7095 41.6 13.0282 41.6 12.2535C41.6 11.4695 41.4413 10.7882 41.124 10.2095C40.816 9.62153 40.3913 9.16886 39.85 8.85153C39.3087 8.53419 38.6927 8.37553 38.002 8.37553C37.3113 8.37553 36.6953 8.53419 36.154 8.85153C35.6127 9.16886 35.1833 9.62153 34.866 10.2095C34.558 10.7882 34.404 11.4695 34.404 12.2535C34.404 13.0282 34.558 13.7095 34.866 14.2975C35.1833 14.8855 35.6127 15.3382 36.154 15.6555C36.7047 15.9729 37.3207 16.1315 38.002 16.1315ZM48.3219 9.32753C49.2552 9.32753 50.0112 9.61219 50.5899 10.1815C51.1685 10.7415 51.4579 11.5535 51.4579 12.6175V17.1395H50.1979V12.7995C50.1979 12.0342 50.0065 11.4509 49.6239 11.0495C49.2412 10.6389 48.7185 10.4335 48.0559 10.4335C47.3839 10.4335 46.8472 10.6435 46.4459 11.0635C46.0539 11.4835 45.8579 12.0949 45.8579 12.8975V17.1395H44.5839V9.46753H45.8579V10.5595C46.1099 10.1675 46.4505 9.86419 46.8799 9.64953C47.3185 9.43486 47.7992 9.32753 48.3219 9.32753ZM54.8129 6.77953V17.1395H53.5389V6.77953H54.8129ZM57.6423 8.22153C57.3996 8.22153 57.1943 8.13753 57.0263 7.96953C56.8583 7.80153 56.7743 7.59619 56.7743 7.35353C56.7743 7.11086 56.8583 6.90553 57.0263 6.73753C57.1943 6.56953 57.3996 6.48553 57.6423 6.48553C57.8756 6.48553 58.0716 6.56953 58.2303 6.73753C58.3983 6.90553 58.4823 7.11086 58.4823 7.35353C58.4823 7.59619 58.3983 7.80153 58.2303 7.96953C58.0716 8.13753 57.8756 8.22153 57.6423 8.22153ZM58.2583 9.46753V17.1395H56.9843V9.46753H58.2583ZM64.1676 9.32753C65.1009 9.32753 65.8569 9.61219 66.4356 10.1815C67.0142 10.7415 67.3036 11.5535 67.3036 12.6175V17.1395H66.0436V12.7995C66.0436 12.0342 65.8522 11.4509 65.4696 11.0495C65.0869 10.6389 64.5642 10.4335 63.9016 10.4335C63.2296 10.4335 62.6929 10.6435 62.2916 11.0635C61.8996 11.4835 61.7036 12.0949 61.7036 12.8975V17.1395H60.4296V9.46753H61.7036V10.5595C61.9556 10.1675 62.2962 9.86419 62.7256 9.64953C63.1642 9.43486 63.6449 9.32753 64.1676 9.32753ZM76.3846 13.0095C76.3846 13.2522 76.3706 13.5089 76.3426 13.7795H70.2106C70.2573 14.5355 70.514 15.1282 70.9806 15.5575C71.4566 15.9775 72.0306 16.1875 72.7026 16.1875C73.2533 16.1875 73.7106 16.0615 74.0746 15.8095C74.448 15.5482 74.7093 15.2029 74.8586 14.7735H76.2306C76.0253 15.5109 75.6146 16.1129 74.9986 16.5795C74.3826 17.0369 73.6173 17.2655 72.7026 17.2655C71.9746 17.2655 71.3213 17.1022 70.7426 16.7755C70.1733 16.4489 69.7253 15.9869 69.3986 15.3895C69.072 14.7829 68.9086 14.0829 68.9086 13.2895C68.9086 12.4962 69.0673 11.8009 69.3846 11.2035C69.702 10.6062 70.1453 10.1489 70.7146 9.83153C71.2933 9.50486 71.956 9.34153 72.7026 9.34153C73.4306 9.34153 74.0746 9.50019 74.6346 9.81753C75.1946 10.1349 75.624 10.5735 75.9226 11.1335C76.2306 11.6842 76.3846 12.3095 76.3846 13.0095ZM75.0686 12.7435C75.0686 12.2582 74.9613 11.8429 74.7466 11.4975C74.532 11.1429 74.238 10.8769 73.8646 10.6995C73.5006 10.5129 73.0946 10.4195 72.6466 10.4195C72.0026 10.4195 71.452 10.6249 70.9946 11.0355C70.5466 11.4462 70.29 12.0155 70.2246 12.7435H75.0686ZM86.5587 3.95153L82.7227 19.5195H81.4627L85.2847 3.95153H86.5587ZM96.6133 17.2375C95.708 17.2375 94.882 17.0275 94.1353 16.6075C93.3887 16.1782 92.796 15.5855 92.3573 14.8295C91.928 14.0642 91.7133 13.2055 91.7133 12.2535C91.7133 11.3015 91.928 10.4475 92.3573 9.69153C92.796 8.92619 93.3887 8.33353 94.1353 7.91353C94.882 7.48419 95.708 7.26953 96.6133 7.26953C97.528 7.26953 98.3587 7.48419 99.1053 7.91353C99.852 8.33353 100.44 8.92153 100.869 9.67753C101.299 10.4335 101.513 11.2922 101.513 12.2535C101.513 13.2149 101.299 14.0735 100.869 14.8295C100.44 15.5855 99.852 16.1782 99.1053 16.6075C98.3587 17.0275 97.528 17.2375 96.6133 17.2375ZM96.6133 16.1315C97.2947 16.1315 97.906 15.9729 98.4473 15.6555C98.998 15.3382 99.4273 14.8855 99.7353 14.2975C100.053 13.7095 100.211 13.0282 100.211 12.2535C100.211 11.4695 100.053 10.7882 99.7353 10.2095C99.4273 9.62153 99.0027 9.16886 98.4613 8.85153C97.92 8.53419 97.304 8.37553 96.6133 8.37553C95.9227 8.37553 95.3067 8.53419 94.7653 8.85153C94.224 9.16886 93.7947 9.62153 93.4773 10.2095C93.1693 10.7882 93.0153 11.4695 93.0153 12.2535C93.0153 13.0282 93.1693 13.7095 93.4773 14.2975C93.7947 14.8855 94.224 15.3382 94.7653 15.6555C95.316 15.9729 95.932 16.1315 96.6133 16.1315ZM106.317 10.5175H104.707V17.1395H103.433V10.5175H102.439V9.46753H103.433V8.92153C103.433 8.06286 103.653 7.43753 104.091 7.04553C104.539 6.64419 105.253 6.44353 106.233 6.44353V7.50753C105.673 7.50753 105.277 7.61953 105.043 7.84353C104.819 8.05819 104.707 8.41753 104.707 8.92153V9.46753H106.317V10.5175ZM110.925 10.5175H109.315V17.1395H108.041V10.5175H107.047V9.46753H108.041V8.92153C108.041 8.06286 108.26 7.43753 108.699 7.04553C109.147 6.64419 109.861 6.44353 110.841 6.44353V7.50753C110.281 7.50753 109.884 7.61953 109.651 7.84353C109.427 8.05819 109.315 8.41753 109.315 8.92153V9.46753H110.925V10.5175ZM113.684 6.77953V17.1395H112.41V6.77953H113.684ZM116.513 8.22153C116.271 8.22153 116.065 8.13753 115.897 7.96953C115.729 7.80153 115.645 7.59619 115.645 7.35353C115.645 7.11086 115.729 6.90553 115.897 6.73753C116.065 6.56953 116.271 6.48553 116.513 6.48553C116.747 6.48553 116.943 6.56953 117.101 6.73753C117.269 6.90553 117.353 7.11086 117.353 7.35353C117.353 7.59619 117.269 7.80153 117.101 7.96953C116.943 8.13753 116.747 8.22153 116.513 8.22153ZM117.129 9.46753V17.1395H115.855V9.46753H117.129ZM123.039 9.32753C123.972 9.32753 124.728 9.61219 125.307 10.1815C125.885 10.7415 126.175 11.5535 126.175 12.6175V17.1395H124.915V12.7995C124.915 12.0342 124.723 11.4509 124.341 11.0495C123.958 10.6389 123.435 10.4335 122.773 10.4335C122.101 10.4335 121.564 10.6435 121.163 11.0635C120.771 11.4835 120.575 12.0949 120.575 12.8975V17.1395H119.301V9.46753H120.575V10.5595C120.827 10.1675 121.167 9.86419 121.597 9.64953C122.035 9.43486 122.516 9.32753 123.039 9.32753ZM135.256 13.0095C135.256 13.2522 135.242 13.5089 135.214 13.7795H129.082C129.128 14.5355 129.385 15.1282 129.852 15.5575C130.328 15.9775 130.902 16.1875 131.574 16.1875C132.124 16.1875 132.582 16.0615 132.946 15.8095C133.319 15.5482 133.58 15.2029 133.73 14.7735H135.102C134.896 15.5109 134.486 16.1129 133.87 16.5795C133.254 17.0369 132.488 17.2655 131.574 17.2655C130.846 17.2655 130.192 17.1022 129.614 16.7755C129.044 16.4489 128.596 15.9869 128.27 15.3895C127.943 14.7829 127.78 14.0829 127.78 13.2895C127.78 12.4962 127.938 11.8009 128.256 11.2035C128.573 10.6062 129.016 10.1489 129.586 9.83153C130.164 9.50486 130.827 9.34153 131.574 9.34153C132.302 9.34153 132.946 9.50019 133.506 9.81753C134.066 10.1349 134.495 10.5735 134.794 11.1335C135.102 11.6842 135.256 12.3095 135.256 13.0095ZM133.94 12.7435C133.94 12.2582 133.832 11.8429 133.618 11.4975C133.403 11.1429 133.109 10.8769 132.736 10.6995C132.372 10.5129 131.966 10.4195 131.518 10.4195C130.874 10.4195 130.323 10.6249 129.866 11.0355C129.418 11.4462 129.161 12.0155 129.096 12.7435H133.94Z" fill="#333333"/>
                       </svg>
                       
                </div>
                 
                   
           </div>
             
        </div>
        {% endfor %}
    </div>
    <div class="details-container" id="details-container" style="display: none;">
        
        {% for diploma in diplomas %}

        <div class="chat-bubble" id="details-{{ diploma.id }}" style="display: none;">
            <button class="close-btn" onclick="hideDetailsContainer()">✖</button>
            <div class="nam-img">
                <h3>{{ diploma.name }}</h3>
                <img src="{{ diploma.image.url }}" alt="{{ diploma.name }}">
            </div>
            <div class="describ">
                <p>{{ diploma.description }}</p>
            </div>
            <div class="info">
                <div class="d-rate">
                   <svg width="36" height="35" viewBox="0 0 36 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M17.5245 0.463525C17.6741 0.00286961 18.3259 0.00287008 18.4755 0.463525L22.378 12.4742C22.445 12.6802 22.6369 12.8197 22.8536 12.8197H35.4823C35.9667 12.8197 36.168 13.4395 35.7762 13.7242L25.5593 21.1472C25.3841 21.2745 25.3107 21.5002 25.3777 21.7062L29.2802 33.7168C29.4299 34.1775 28.9026 34.5605 28.5108 34.2758L18.2939 26.8528C18.1186 26.7255 17.8814 26.7255 17.7061 26.8528L7.48924 34.2758C7.09739 34.5605 6.57015 34.1775 6.71982 33.7168L10.6223 21.7062C10.6893 21.5002 10.6159 21.2745 10.4407 21.1472L0.22382 13.7242C-0.168037 13.4395 0.0333505 12.8197 0.517712 12.8197H13.1464C13.3631 12.8197 13.555 12.6802 13.622 12.4742L17.5245 0.463525Z" fill="#FFCC00"/>
                       </svg>
                       <p>
                        {{ diploma.average_rating|floatformat:1 }} 
                        <span>({{ diploma.ratings_count }})</span>
                        </p>
                </div>
                <div class="d-seven-module">
                   <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M24.8398 10.0333C24.8932 10.8467 24.8265 11.7667 24.6665 12.7933L23.6932 19.0467C22.8665 24.26 20.4532 26.02 15.2398 25.2067L8.98649 24.22C7.18649 23.94 5.79983 23.46 4.78649 22.74C2.85316 21.3933 2.29316 19.18 2.82649 15.7667L3.81316 9.51334C4.63983 4.3 7.05316 2.54 12.2665 3.35334L18.5198 4.34C22.7065 4.99334 24.6665 6.7 24.8398 10.0333Z" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                       <path d="M27.3333 18.46L25.3333 24.4733C23.6666 29.4867 21 30.82 15.9866 29.1533L9.97329 27.1533C6.94662 26.1533 5.26662 24.7667 4.78662 22.74C5.79995 23.46 7.18662 23.94 8.98662 24.22L15.24 25.2067C20.4533 26.02 22.8666 24.26 23.6933 19.0467L24.6666 12.7933C24.8266 11.7667 24.8933 10.8467 24.84 10.0333C28.0266 11.7267 28.72 14.2867 27.3333 18.46Z" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                       <path d="M10.9865 12.4733C12.2678 12.4733 13.3065 11.4346 13.3065 10.1533C13.3065 8.87201 12.2678 7.83331 10.9865 7.83331C9.7052 7.83331 8.6665 8.87201 8.6665 10.1533C8.6665 11.4346 9.7052 12.4733 10.9865 12.4733Z" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                       </svg>
                       <p>{{ diploma.module_count}} Modules</p>
                </div>
                <div class="hoours">
                   <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M29.3332 16C29.3332 23.36 23.3598 29.3334 15.9998 29.3334C8.63984 29.3334 2.6665 23.36 2.6665 16C2.6665 8.64002 8.63984 2.66669 15.9998 2.66669C23.3598 2.66669 29.3332 8.64002 29.3332 16Z" stroke="#333333" stroke-width="1.23837" stroke-linecap="round" stroke-linejoin="round"/>
                       <path d="M20.9468 20.24L16.8135 17.7734C16.0935 17.3467 15.5068 16.32 15.5068 15.48V10.0134" stroke="#333333" stroke-width="1.23837" stroke-linecap="round" stroke-linejoin="round"/>
                       </svg>
                       <p>{{ diploma.course_duration|duration_hours }}</p>
                </div>
                
               
                   
           </div>

           <div class="details-info">

            <div class="locations">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.9998 17.9067C18.2973 17.9067 20.1598 16.0442 20.1598 13.7467C20.1598 11.4492 18.2973 9.58667 15.9998 9.58667C13.7023 9.58667 11.8398 11.4492 11.8398 13.7467C11.8398 16.0442 13.7023 17.9067 15.9998 17.9067Z" stroke="#333333" stroke-width="1.23837"/>
                    <path d="M4.8266 11.32C7.45327 -0.226643 24.5599 -0.21331 27.1733 11.3334C28.7066 18.1067 24.4933 23.84 20.7999 27.3867C18.1199 29.9734 13.8799 29.9734 11.1866 27.3867C7.5066 23.84 3.29327 18.0934 4.8266 11.32Z" stroke="#333333" stroke-width="1.23837"/>
                    </svg>
                    <p>Online / Offline</p>
                    
             </div>
 
            <div class="start-in">
               <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                   <path d="M10.6665 2.66669V6.66669" stroke="#333333" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M21.3335 2.66669V6.66669" stroke="#333333" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M4.6665 12.12H27.3332" stroke="#333333" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M28 11.3334V22.6667C28 26.6667 26 29.3334 21.3333 29.3334H10.6667C6 29.3334 4 26.6667 4 22.6667V11.3334C4 7.33335 6 4.66669 10.6667 4.66669H21.3333C26 4.66669 28 7.33335 28 11.3334Z" stroke="#333333" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M20.9264 18.2667H20.9384" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M20.9264 22.2667H20.9384" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M15.9938 18.2667H16.0058" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M15.9938 22.2667H16.0058" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M11.0592 18.2667H11.0712" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M11.0592 22.2667H11.0712" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   </svg>
                   <p>Start in {{ diploma.start_course.date}}</p>
            </div>

            <div class="instructors">
               <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                   <path d="M22.6665 28.5H9.33317C3.99984 28.5 2.6665 27.1667 2.6665 21.8333V11.1667C2.6665 5.83333 3.99984 4.5 9.33317 4.5H22.6665C27.9998 4.5 29.3332 5.83333 29.3332 11.1667V21.8333C29.3332 27.1667 27.9998 28.5 22.6665 28.5Z" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M18.6665 11.1667H25.3332" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M20 16.5H25.3333" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M22.6665 21.8333H25.3332" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M11.3333 15.5534C12.6661 15.5534 13.7466 14.4729 13.7466 13.14C13.7466 11.8072 12.6661 10.7267 11.3333 10.7267C10.0004 10.7267 8.91992 11.8072 8.91992 13.14C8.91992 14.4729 10.0004 15.5534 11.3333 15.5534Z" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                   <path d="M15.9998 22.2733C15.8132 20.34 14.2798 18.82 12.3465 18.6467C11.6798 18.58 10.9998 18.58 10.3198 18.6467C8.3865 18.8333 6.85317 20.34 6.6665 22.2733" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                   </svg>
                   <p>Instructors</p>
                   
            </div>
            <div class="floating-card" id="instructors-card-{{ diploma.id }}" style="display: none;">
                
                    {% for module in diploma.modules.all %}
                        {% if module.instructor and module.instructor_image %}
                        <div class="d-instructor">
                            <img src="{{ module.instructor_image.url }}" alt="{{ module.instructor }}" class="instructor-img">
                            <p>{{ module.instructor }}</p>
                        </div>
                        {% endif %}
                    {% endfor %}
                
            </div>
               
       </div>



            <div class="list">
        	{% if diploma.modules.exists %}
        	{% load custom_filters %}
        	<div class="line-dots">
            		<svg id="dynamic-line-{{ forloop.counter }}" xmlns="http://www.w3.org/2000/svg" fill="none" width="20" height="100%" viewBox="0 0 20 100%">
                	<!-- Line -->
                	<path id="line-path-{{ forloop.counter }}" d="M10 0 V100%" stroke="#333333" stroke-width="1.5" />
            		</svg>
        	</div>
    
        	<div class="list-info">
            	{% for module in diploma.modules.all %}
            	<div class="module-item" data-line-id="dynamic-line-{{ forloop.parentloop.counter }}">
                	<p>{{ module.title }}</p>
            	</div>
            	{% endfor %}
        	</div>
        	{% endif %}
           </div>



            {% if user.is_authenticated %}
            <div class="button">
                <button class="enroll-button" data-diploma-id="{{ diploma.id }}">Enroll</button>
            </div>
            {% else %}
            <div class="button">
            <a href="{% url 'login' %}" class="enroll-button" style="text-decoration: none; color: #ffffff;">Login to Enroll</a>
            </div>
            {% endif %}
            
            
            
            <div class="popup diploma" id="successPopup-{{ diploma.id }}" style="display:none;">
                <img src="{% static 'landmark/images/enroll-image.jpg' %}" alt="Success">
                <h3>One step left to enroll successfully</h3>
                <p>After payment, send a screenshot of your invoice to this contact. The enrolled diploma will be added to your profile 1 day after payment.</p>
                <div class="d-payment-row">
                    <p>To go to your payment screen click</p>
                    <a href="{{ diploma.link }}" class="payment-link close-popup" data-popup-id="successPopup-{{ diploma.id }}">here</a>

                </div>
            </div>

            <div class="diploma-comments">
                <p>Comments</p>
                {% if diploma.approved_comments %}
                    {% for comment in diploma.approved_comments %}
                    <div class="img-comment">
                        {% if comment.user.userprofile.image %}
                            <img src="{{ comment.user.userprofile.image.url }}" 
                                 alt="{{ comment.user.get_full_name|default:comment.user.username }}">
                        {% else %}
                            <img src="{% static 'landmark/images/user1.png' %}" 
                                 alt="{{ comment.user.get_full_name|default:comment.user.username }}">
                        {% endif %}
                        <div class="coment-sec">
                            <h3>{{ comment.user.get_full_name|default:comment.user.username }}
                                <span>{{ comment.created_at|date:"F j, Y, g:i a" }}</span>
                            </h3>
                            <h4>{{ comment.content }}</h4>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <p>No comments available.</p>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>      
</div>
<div id="m-d-popup" class="m-d-popup hidden">
    <div class="popup-content">
        <button class="close-btn" onclick="closePopup()">✖</button>
        <div id="popup-details">
            <!-- Popup content will be populated dynamically -->
        </div>
    </div>
</div>


</div>


<script>
    function hideDetailsContainer() {
        const detailsContainer = document.getElementById('details-container');
        detailsContainer.style.display = 'none';
    }
function showDetails(id) {
    const detailsContainer = document.getElementById("details-container");
    detailsContainer.style.display = "block"; // Show details container
    const details = document.querySelectorAll(".chat-bubble");
    details.forEach(detail => detail.style.display = "none"); // Hide all details
    document.getElementById(`details-${id}`).style.display = "block"; // Show the specific detail
    }
    document.addEventListener("DOMContentLoaded", function () {
  const popup = document.getElementById("m-d-popup");
  const closeBtn = popup.querySelector(".close-btn");

  

  // Open popup function
  function openPopup(diplomaId) {
    const detailsContainer = document.getElementById(`details-${diplomaId}`);
    const allDetails = document.querySelectorAll(".details-container");

    // Hide all details containers and show the relevant one
    // allDetails.forEach(container => container.classList.add("hidden"));
    if (detailsContainer) detailsContainer.classList.remove("hidden");

    popup.classList.remove("hidden");
  }

  // Close popup function
  function closePopup() {
    const detailsContainer = document.getElementById("details-container");
    detailsContainer.style.display = "none";
  }

  // Attach click events to diploma cards
  document.querySelectorAll(".diploma-card").forEach(card => {
    card.addEventListener("click", function () {
      const diplomaId = this.getAttribute("data-diploma-id");
      openPopup(diplomaId);
    });
  });

  // Attach event to close button
  closeBtn.addEventListener("click", closePopup);

  // Close popup when clicking outside of it
  popup.addEventListener("click", function (event) {
    if (event.target === popup) closePopup();
  });
});


//         document.addEventListener("DOMContentLoaded", function () {
//     const modules = document.querySelectorAll(".module-item"); // Get all module titles
//     const svg = document.getElementById("dynamic-line");
//     const path = document.getElementById("line-path");

//     const circleSpacing = 120; // Space between circles in pixels (reduced for closer spacing)
//     const paddingTop = 20; // Add padding at the top of the line
//     const totalHeight = (modules.length - 1) * circleSpacing + paddingTop + 20; // Adjust total height of the line

//     // Set the height of the SVG dynamically
//     svg.setAttribute("height", `${totalHeight}px`);

//     // Update the line height dynamically
//     path.setAttribute("d", `M10 ${paddingTop} V${totalHeight - 10}`);

//     // Dynamically position the circles
//     modules.forEach((module, index) => {
//         const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
//         circle.setAttribute("cx", "10");
//         circle.setAttribute("cy", `${paddingTop + index * circleSpacing}`);
//         circle.setAttribute("r", "10");
//         circle.setAttribute("fill", "#014B9C");
//         svg.appendChild(circle);
//     });
// });

document.addEventListener("DOMContentLoaded", function () {
    const moduleItems = document.querySelectorAll(".module-item"); 
    moduleItems.forEach((moduleItem) => {
        const title = moduleItem.textContent || moduleItem.innerText; 
        let marginBottomValue = '0px'; 

        
        if (title.length > 110) {
            marginBottomValue = '0';
        } else if (title.length > 80) {
            marginBottomValue = '0px';
        } else if (title.length > 50) {
            marginBottomValue = '0px';
        }

        
        moduleItem.style.marginBottom = marginBottomValue;
    });
});

document.addEventListener("DOMContentLoaded", function () {
    const diplomaLists = document.querySelectorAll(".list");

    diplomaLists.forEach(diplomaList => {
        const modules = diplomaList.querySelectorAll(".module-item");
        const svg = document.getElementById(diplomaList.querySelector(".module-item").dataset.lineId);
        const path = svg.querySelector("path");

        // Default values
        let defaultSpacing = 71; 
        let extraSpacing60 = 0; 
        let extraSpacing110 = 52; 
        let paddingTop = 20; 
        let circleRadius = 10;

        // Adjust values for mobile
        if (window.innerWidth <= 800) { // Example breakpoint for mobile
            defaultSpacing = 53; // Reduce spacing
            circleRadius = 7; // Smaller radius
            paddingTop = 10; // Adjust padding
            extraSpacing110 = 30;
        }

        let currentY = paddingTop; 
        const circlePositions = []; 

        modules.forEach((module, index) => {
            const title = module.textContent || module.innerText; 
            let additionalSpacing = 0;

            if (title.length > 110) {
                additionalSpacing += extraSpacing110;
            }
	    else if(title.length > 59 && title.length < 100){
                additionalSpacing += extraSpacing60;
            } 
            
            const circleY = currentY;
            circlePositions.push(circleY); 

            const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            circle.setAttribute("cx", "10");
            circle.setAttribute("cy", `${circleY}`);
            circle.setAttribute("r", `${circleRadius}`);
            circle.setAttribute("fill", "#014B9C");
            svg.appendChild(circle);

            currentY += defaultSpacing + additionalSpacing;
        });

        const totalHeight = circlePositions[circlePositions.length - 1] + paddingTop;
        svg.setAttribute("height", `${totalHeight}px`);

        const lineStart = circlePositions[0] - circleRadius;
        const lineEnd = circlePositions[circlePositions.length - 1] + circleRadius;
        path.setAttribute("d", `M10 ${lineStart} V${lineEnd}`);
    });
});



document.addEventListener('DOMContentLoaded', () => {
    // Add event listener for enroll buttons
    document.querySelectorAll('.enroll-button').forEach(button => {
        button.addEventListener('click', () => {
            const diplomaId = button.dataset.diplomaId;

            fetch(`/landmark/diplomas/enroll/${diplomaId}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': getCookie('csrftoken'),
                },
                body: JSON.stringify({}),
            })
                .then(response => {
                    if (response.ok) {
                        const popup = document.getElementById(`successPopup-${diplomaId}`);
                        if (popup) {
                            popup.style.display = 'block';
                        }
                    } else {
                        alert('Failed to enroll. Please try again.');
                    }
                });
        });
    });

    // Add event listener for "here" links to close the popup
    document.querySelectorAll('.close-popup').forEach(link => {
        link.addEventListener('click', (event) => {
            const popupId = link.dataset.popupId;
            const popup = document.getElementById(popupId);
            if (popup) {
                popup.style.display = 'none';
            }
        });
    });
});


// Utility to get CSRF token
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === name + '=') {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

function toggleSave(button) {
    const outlinePath = button.querySelector(".outline");
    const filledPath = button.querySelector(".filled");

    // Toggle visibility of the paths and update the fill color
    if (filledPath.style.display === "none") {
        outlinePath.style.display = "none";
        filledPath.style.display = "block";
        filledPath.setAttribute("fill", "darkblue"); // Change saved icon color
    } else {
        outlinePath.style.display = "block";
        filledPath.style.display = "none";
        outlinePath.setAttribute("fill", "darkblue"); // Revert to default color
    }
}


// Get the elements
document.addEventListener('DOMContentLoaded', () => {
    // Attach event listeners for each diploma
    const diplomas = document.querySelectorAll('.diploma-card');
    diplomas.forEach((diplomaCard) => {
        const diplomaId = diplomaCard.getAttribute('onmouseover').match(/'(\d+)'/)[1];
        const instructorsButton = document.getElementById(`instructors-button-${diplomaId}`);
        const instructorsCard = document.getElementById(`instructors-card-${diplomaId}`);

        // Toggle the floating card on click
        instructorsButton.addEventListener('click', (event) => {
            event.stopPropagation(); // Prevent triggering the document click event
            const isVisible = instructorsCard.style.display === 'block';
            instructorsCard.style.display = isVisible ? 'none' : 'block';
        });

        // Close the card if clicking outside
        document.addEventListener('click', (event) => {
            if (
                !instructorsButton.contains(event.target) &&
                !instructorsCard.contains(event.target)
            ) {
                instructorsCard.style.display = 'none';
            }
        });
    });
});


    </script>
{% endblock %}
